{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tdegi\\\\OneDrive\\\\Desktop\\\\Bootcamp\\\\Repository\\\\fifth-street\\\\client\\\\src\\\\components\\\\Sort\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Container, Image, Dropdown } from \"react-bootstrap\";\n// import sortProducts from \"../../utils/helpers.js\";\nimport { UPDATE_PRODUCTS } from '../../utils/actions.js';\nimport { QUERY_PRODUCTS } from '../../utils/queries.js';\nimport { useQuery } from '@apollo/client';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { idbPromise } from '../../utils/helpers';\nlet sorted = false;\nconst Sort = () => {\n  const [state, dispatch] = useStoreContext();\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_PRODUCTS);\n  const [sortOption, setSortOption] = useState('');\n  let sortedProducts = data;\n  useEffect(() => {\n    //if there's data to be stored\n    if (data) {\n      //store it in the global state object\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: data.products\n      });\n\n      //but also take each product and save it to IndexedDB using the helper function\n      data.products.forEach(product => {\n        idbPromise('products', 'put', product);\n      });\n      //add else if to check if 'loading' is undefined in 'useQuery()' hook\n    } else if (!loading) {\n      //since we're offline, get all of the data from the 'products' store\n      idbPromise('products', 'get').then(products => {\n        dispatch({\n          type: UPDATE_PRODUCTS,\n          products: products\n        });\n      });\n    } else if (sorted = true) {\n      console.log('!!!');\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: sortedProducts\n      });\n    }\n  }, [data, loading, dispatch]);\n  const handleSort = e => {\n    setSortOption(e);\n    if (e === 'Name') {\n      console.log(data);\n      sorted = true;\n      const sortedProducts = data.products.slice().sort((a, b) => a.name.localeCompare(b.name));\n      console.log(sortedProducts);\n      return sortedProducts;\n    } else if (sortOption === 'Price Low to High') {\n      data.products.slice().sort((a, b) => a.price - b.price);\n    } else if (sortOption === 'Price High to Low') {\n      data.products.slice().sort((a, b) => b.price - a.price);\n    } else {}\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n    variant: \"light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, \"Sort Products:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, sortOption), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"Name\",\n    onSelect: handleSort,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"Price Low to High\",\n    onSelect: handleSort,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, \"Price Low to High\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"Price High to Low\",\n    onSelect: handleSort,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"Price High to Low\"))))));\n};\nexport default Sort;","map":{"version":3,"names":["React","useState","useEffect","Container","Image","Dropdown","UPDATE_PRODUCTS","QUERY_PRODUCTS","useQuery","useStoreContext","idbPromise","sorted","Sort","state","dispatch","loading","data","sortOption","setSortOption","sortedProducts","type","products","forEach","product","then","console","log","handleSort","e","slice","sort","a","b","name","localeCompare","price"],"sources":["C:/Users/tdegi/OneDrive/Desktop/Bootcamp/Repository/fifth-street/client/src/components/Sort/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Image,\r\n  Dropdown,\r\n} from \"react-bootstrap\";\r\n// import sortProducts from \"../../utils/helpers.js\";\r\nimport { UPDATE_PRODUCTS } from '../../utils/actions.js';\r\nimport { QUERY_PRODUCTS } from '../../utils/queries.js';\r\nimport { useQuery } from '@apollo/client';\r\nimport { useStoreContext } from '../../utils/GlobalState';\r\nimport { idbPromise } from '../../utils/helpers';\r\nlet sorted = false;\r\n\r\nconst Sort = () => {\r\n    const [state, dispatch] = useStoreContext();\r\n    const { loading, data } = useQuery(QUERY_PRODUCTS);\r\n    const [sortOption, setSortOption] = useState('');\r\n    let sortedProducts = data;\r\n\r\n    useEffect(() => {\r\n        //if there's data to be stored\r\n        if (data) {\r\n          //store it in the global state object\r\n          dispatch({\r\n            type: UPDATE_PRODUCTS,\r\n            products: data.products\r\n          });\r\n    \r\n          //but also take each product and save it to IndexedDB using the helper function\r\n          data.products.forEach((product) => {\r\n            idbPromise('products', 'put', product);\r\n          });\r\n          //add else if to check if 'loading' is undefined in 'useQuery()' hook\r\n        } else if (!loading) {\r\n          //since we're offline, get all of the data from the 'products' store\r\n          idbPromise('products', 'get').then((products) => {\r\n            dispatch({\r\n              type: UPDATE_PRODUCTS,\r\n              products: products\r\n            });\r\n          });\r\n        } else if (sorted = true) {\r\n          console.log('!!!');\r\n          dispatch({\r\n            type: UPDATE_PRODUCTS,\r\n            products: sortedProducts\r\n          });\r\n        }\r\n    }, [data, loading, dispatch]);\r\n\r\n    const handleSort = (e) => {\r\n      setSortOption(e);\r\n      if (e==='Name') {\r\n        console.log(data);\r\n        sorted = true;\r\n        const sortedProducts = data.products.slice().sort((a,b) => a.name.localeCompare(b.name));\r\n        console.log(sortedProducts);\r\n        return(sortedProducts);\r\n      } else if (sortOption==='Price Low to High') {\r\n        data.products.slice().sort((a, b) => a.price - b.price);\r\n      } else if (sortOption==='Price High to Low'){\r\n        data.products.slice().sort((a, b) => b.price - a.price);\r\n      } else {\r\n      }\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <Container>\r\n          {/* <Image\r\n            src={require(`../../assets/logo.jpg`)}\r\n            fluid\r\n            className='background-image'\r\n          /> */}\r\n          <div>\r\n            <Dropdown>\r\n              <Dropdown.Toggle\r\n                variant=\"light\"\r\n              >\r\n                Sort Products:\r\n              </Dropdown.Toggle>\r\n                <p>{sortOption}</p>\r\n              <Dropdown.Menu>\r\n                <Dropdown.Item eventKey=\"Name\" onSelect={handleSort}>Name</Dropdown.Item>\r\n                <Dropdown.Item eventKey=\"Price Low to High\" onSelect={handleSort}>Price Low to High</Dropdown.Item>\r\n                <Dropdown.Item eventKey=\"Price High to Low\" onSelect={handleSort}>Price High to Low</Dropdown.Item>\r\n              </Dropdown.Menu>\r\n            </Dropdown>\r\n          </div>\r\n          {/* {sortProducts(sortOption, data)} */}\r\n        </Container>\r\n      </>\r\n    );\r\n  };\r\n  \r\nexport default Sort;"],"mappings":"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"},"metadata":{},"sourceType":"module"}